plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

sourceSets {
    main {
        java {
            // Use downloaded ProGuard sources
            srcDirs = ['../proguard-sources', 'src/main/java']
        }
    }
}

dependencies {
    // No external dependencies - using built-in XML parsing
}

// Custom task to run our test runner
task runTests(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'com.offguard.TestRunner'
    workingDir = projectDir
}

task runExample(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'com.offguard.ExampleMain'
    workingDir = projectDir
}
